<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Foodie</title>

    <!-- Custom fonts for this template -->
    <link rel="stylesheet" type="text/css" th:href="@{/vendor/fontawesome-free/css/all.min.css}">
    <link
            href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i"
            rel="stylesheet">

    <!-- Custom styles for this template -->
    <link rel="stylesheet" type="text/css" th:href="@{/css/sb-admin-2.min.css}">

    <!-- Custom styles for this page -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/earlyaccess/notosanskr.css" />
    <link rel="stylesheet" type="text/css" th:href="@{/css/fontawesome-all.min.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/css/adminlte.min.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/css/admin_commons.css}" />

    <link rel="stylesheet" type="text/css" th:href="@{/css/manage-restaurants.css}"/>
</head>

<body id="page-top">

<!-- Page Wrapper -->
<div id="wrapper">

    <!-- Sidebar -->
    <div th:replace="./fragments/admin-sidebar.html"> </div>
    <!-- End of Sidebar -->

    <!-- Content Wrapper -->
    <div id="content-wrapper" class="d-flex flex-column">

        <!-- Main Content -->
        <div id="content" style="font-size: 9pt">

            <!-- Topbar -->
            <nav class="navbar navbar-expand navbar-light bg-white topbar mb-4 static-top shadow">

                <!-- Sidebar Toggle (Topbar) -->
                <form class="form-inline">
                    <button id="sidebarToggleTop" class="btn btn-link d-md-none rounded-circle mr-3">
                        <i class="fa fa-bars"></i>
                    </button>
                </form>

                <!-- Topbar Search -->
                <form
                        class="d-none d-sm-inline-block form-inline mr-auto ml-md-3 my-2 my-md-0 mw-100 navbar-search">
                    <div class="input-group">
                        <input type="text" class="form-control bg-light border-0 small" placeholder="Search for..."
                               aria-label="Search" aria-describedby="basic-addon2">
                        <div class="input-group-append">
                            <button class="btn btn-primary" type="button">
                                <i class="fas fa-search fa-sm"></i>
                            </button>
                        </div>
                    </div>
                </form>

            </nav>
            <!-- End of Topbar -->

            <!-- Begin Page Content -->
            <div class="container-fluid" style="    width: 700px;">

                <!-- DataTales Example -->
                <form th:action="${'/admin/shop/update/'+ payload.shopId}" method="post" enctype="multipart/form-data" onsubmit="return jbSubmit();">
<!--                    <input type="hidden" th:field="${shop.shopType}" th:value="1" />-->
                    <div class="card shadow mb-4">
                        <div class="card-header py-3">
                            <h6 class="m-0 font-weight-bold text-primary" th:text="${payload.shopName}" style="    width: 30%;float: left;"></h6>
<!--                            <a>-->
                            <button class="btn btn-info btn-sm" style="float: right;width: 100px;margin-left: 14px;margin-top: -2px;height: 37px;" type="submit">맛집 수정하기</button>
<!--                            <button class="btn btn-info btn-sm" onclick="return false;" value="상점조회" id="search_duplicated_list_detail" style=" float: right;   width: 100px;margin-left: 14px;margin-top: -2px;height: 37px;">중복확인</button>-->
<!--                            </a>-->
                        </div>
                        <div class="content" style="    padding-top: 16px;">
                            <div class="container-fluid">
                                <div class="col-md-12">
                                    <div class="card">
                                        <div class="card-body">
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <label for="restaurants-name-travel">맛집명</label>
                                                        <input type="text" th:field="${shop.shopName}" class="form-control" id="restaurants-name-travel" placeholder="여행지명" >
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <label for="restaurants-phone">전화번호</label>
                                                        <input type="tel" class="form-control" th:field="${shop.phone}" id="restaurants-phone"  placeholder="전화번호">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <label for="restaurants-manager">담당자</label>
                                                        <input type="text"  class="form-control" id="restaurants-manager" placeholder="맛집명" >
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <label for="restaurants-manager-phone">담당자 연락처</label>
                                                        <input type="tel" class="form-control" id="restaurants-manager-phone" th:field="${shop.shopPhone}" placeholder="전화번호">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-6">

                                                    <div class="form-group">
                                                        <label for="select-tags" style="width: 400px;">전문가평가</label>
                                                        <div style="display: flex">
                                                            <select class="custom-select" id="select-tags1" th:field="${shop.foodieLogRating}">
                                                                <option value=""></option>
                                                                <option value="A">A</option>
                                                                <option value="AA">AA</option>
                                                                <option value="AAA">AAA</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <label for="website">추천리스트</label>
                                                        <div class="flex">
                                                            <div class="custom-control custom-radio">
                                                                <input class="custom-control-input" id="is-free-y" type="radio" name="reservation"  >
                                                                <label class="custom-control-label" for="is-free-y">추천됨</label>
                                                            </div>
                                                            <div class="custom-control custom-radio">
                                                                <input class="custom-control-input" id="is-free-n" type="radio" name="reservation">
                                                                <label class="custom-control-label" for="is-free-n">추천안됨</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <label for="restaurants-open-hours">영업시간</label>
                                                        <input type="text" class="form-control" id="restaurants-open-hours" th:field="${shop.operationTime}" placeholder="영업시간">
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <label for="restaurants-closed">휴무일</label>
                                                        <input type="text" class="form-control" id="restaurants-closed" th:field="${shop.holiday}" placeholder="휴무일">
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col-md-6">

                                                    <div class="form-group">
                                                        <label for="table-filter3" style="width: 400px;">음식 카테고리</label>
                                                        <div style="display: flex">
                                                            <select id="table-filter1" class="custom-select" th:field="${shop.bigCategory}">
                                                                <option
                                                                        th:each="val : ${allFirstFoodInfos}"
                                                                        th:value="${val.id}"
                                                                        th:utext="${val.listName}"
                                                                ></option>
                                                                <option value="" ></option>
                                                            </select>
                                                            <select id="table-filter2" class="custom-select" th:field="${shop.middleCategory}">
                                                                <option
                                                                        th:each="val : ${secondFoodInfos}"
                                                                        th:value="${val.id}"
                                                                        th:utext="${val.listName}"
                                                                ></option>
                                                                <option value="" ></option>
                                                            </select>
                                                            <select id="table-filter3" class="custom-select" th:field="${shop.smallCategory}">
                                                                <option
                                                                        th:each="val : ${thirdFoodInfos}"
                                                                        th:value="${val.id}"
                                                                        th:utext="${val.listName}"
                                                                ></option>
                                                                <option value="" ></option>
                                                            </select>
                                                        </div>
                                                        <div class="flex tag-list"></div>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <label for="website">홈페이지</label>
                                                        <input type="text" class="form-control" id="website" placeholder="홈페이지" th:field="${shop.homepage}">
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <label for="recommend-menu">추천메뉴</label>
                                                        <input type="text" class="form-control" id="recommend-menu" placeholder="추천메뉴" th:field="${shop.recommandMenu}">
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <label for="budget">예산</label>
                                                        <input type="text" class="form-control" id="budget" placeholder="예산"  th:field="${shop.budget}">
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <label for="review-link-naver">네이버블로그 SHOP ID</label>
                                                        <input type="text" class="form-control" id="review-link-naver" th:field="${shop.blogShopId}" placeholder="https://blog.naver.com/">
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <label for="review-link-instagram">인스타그램 키워드</label>
                                                        <input type="text" class="form-control" id="review-link-instagram" placeholder="https://www.instagram.com/" th:field="${shop.instaKeyword}" >
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <label for="restaurants-open-hours">예약여부</label>
                                                        <div class="flex">
                                                            <input type="text" class="form-control" id="is_reservation" th:field="${shop.isReservation}" >
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <label for="park">주차여부</label>
                                                        <input type="text" class="form-control" id="park" placeholder="주차" th:field="${shop.isParking}">
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                       <div class="form-group">
                                                            <label for="restaurants-closed">포장/배달</label>
                                                                <input type="text" class="form-control" id="is_delivery" placeholder="포장" th:field="${shop.isDelivery}">
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <label for="restaurants-closed">배경</label>
                                                        <div class="flex">
                                                            <div class="custom-control custom-radio">
                                                                <input class="custom-control-input" id="background_type_1" type="radio" name="background_type" th:field="${shop.shopType}" value="1" >
                                                                <label class="custom-control-label" for="background_type_1">1번(레드)</label>
                                                                <img src="/images/background_red.png" class="thumbnail" height='30px' />
                                                            </div>
                                                            <div class="custom-control custom-radio">
                                                                <input class="custom-control-input" id="background_type_3" type="radio" name="background_type" th:field="${shop.shopType}" value="3" >
                                                                <label class="custom-control-label" for="background_type_3">2번(머스타드)</label>
                                                                <img src="/images/background_mustard.png" class="thumbnail" height='30px' />
                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col-md-6">

                                                    <div class="form-group">
                                                        <label for="select-tags" style="width: 400px;">지역별 설정</label>
                                                        <div style="display: flex">
                                                            <select id="table-filter4" class="custom-select" th:field="${shop.area1st}">
                                                                <!--/*@thymesVar id="listName" type="String"*/-->
                                                                <option
                                                                        th:each="val : ${allFirstRegionInfos}"
                                                                        th:value="${val.id}"
                                                                        th:utext="${val.listName}"
                                                                ></option>
                                                                <option value="" ></option>
                                                            </select>
                                                            <select class="custom-select"  id="table-filter5" th:field="${shop.area2st}">
                                                                <option
                                                                        th:each="val : ${secondRegionInfos}"
                                                                        th:value="${val.id}"
                                                                        th:utext="${val.listName}"
                                                                ></option>
                                                                <option value="" ></option>
                                                            </select>
                                                            <select class="custom-select"  id="table-filter6" th:field="${shop.area3st}">
                                                                <option
                                                                        th:each="val : ${thirdRegionInfos}"
                                                                        th:value="${val.id}"
                                                                        th:utext="${val.listName}"
                                                                ></option>
                                                                <option value="" ></option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <label for="select-tags" style="width: 400px;">역세권 설정</label>
                                                        <div style="display: flex">
                                                            <select id="table-filter7" class="custom-select" th:field="${shop.subwayTypeId}">
                                                                <!--/*@thymesVar id="listName" type="String"*/-->
                                                                <option
                                                                        th:each="val : ${allFirstSubwayInfos}"
                                                                        th:value="${val.id}"
                                                                        th:utext="${val.listName}"
                                                                ></option>
                                                                <option value="" ></option>
                                                            </select>
                                                            <select class="custom-select"  id="table-filter8" th:field="${shop.subway2st}">
                                                                <option
                                                                        th:each="val : ${secondSubwayInfos}"
                                                                        th:value="${val.id}"
                                                                        th:utext="${val.listName}"
                                                                ></option>
                                                                <option value="" ></option>
                                                            </select>
                                                            <select class="custom-select"  id="table-filter9" th:field="${shop.subway3st}">
                                                                <option
                                                                        th:each="val : ${thirdSubwayInfos}"
                                                                        th:value="${val.id}"
                                                                        th:utext="${val.listName}"
                                                                ></option>
                                                                <option value="" ></option>
                                                            </select>
                                                            <input class="form-control" id="exit" type="text" name="exit"  th:field="${shop.exitNum}" style="    width: 45px;font-size: 9pt !important;">
                                                        </div>
                                                    </div>

                                                </div>

                                            </div>


                                            <div class="form-group" style="display: flex; padding-top: 20px;">
                                                <div class="" style="width: 50%;">
                                                    <label for="restaurants-address-detial">주소 (도로명)</label>
                                                    <div style="display: flex;">
                                                        <input type="text" class="form-control" id="restaurants-address-detial" placeholder="주소" th:field="${shop.address}" >
                                                    </div>
                                                </div>

                                                <div class="" style="width: 50%;">
                                                    <label for="restaurants-address-detial">주소 (지번)</label>
                                                    <div style="display: flex;">
                                                        <input type="text" class="form-control" id="restaurants-address-detial-jibun" placeholder="주소"  th:field="${shop.roadAddress}">
                                                    </div>
                                                </div>
                                            </div>


                                            <div class="form-group">
                                                <label for="restaurants-location-detial">찾아가는길(상세주소)</label>
                                                <input type="text" class="form-control" id="restaurants-location-detial" placeholder="찾아가는길" th:field="${shop.detailAddress}">
                                            </div>

                                            <div class="form-group">
                                                <label for="restaurants-location-detial">해시태그</label>
                                                <input type="text" class="form-control" id="restaurants-hashtag" placeholder="해시태그" th:field="${shop.tag}">
                                            </div>

                                            <div class="row">
                                                <div class="col-md-12">

                                                    <div class="form-group">
                                                        <label for="restaurants-closed">맛집촌선택</label>
                                                        <div class="flex" style="display: block;">
                                                            <div class="custom-control custom-radio" style="float: left;padding-right:15px;"  id="shoptown" th:each="infos : ${shopTownList}">
                                                                <input class="custom-control-input" th:id="${infos.listName}" th:value="${infos.id}"  type="checkbox" name="theme" th:field="${shop.villageTypeId}">
                                                                <label class="custom-control-label" th:for="${infos.listName}" th:text="${infos.listName}"></label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="form-group">
                                                        <label for="restaurants-closed">테마별</label>
                                                        <div class="flex" style="display: block;">
                                                            <div class="custom-control custom-radio" style="float: left;padding-right:15px;"  th:field="*{shop.themeList}" th:each="theme, stat : *{themeTags}" multiple="multiple">
                                                                <!--                                                                <div th:text="${shop.themeList[__${stat.index}__]}"></div>-->
                                                                <div th:text="${shop.themeList}"></div>
                                                                <!--                                                                <input class="custom-control-input" th:if="${shop.themeList != null}" th:field="${shop.themeList}" th:checked="${#arrays.contains(#strings.arraySplit(shop.themeList,','), theme.listName)} == true" th:id="${theme.listName}" type="checkbox" name="theme">-->
                                                                <input class="custom-control-input" th:if="${shop.themeList != null}" th:field="*{shop.themeList}" th:checked="${#arrays.contains(#strings.arraySplit(shop.themeList,','), theme.listName)} == true" th:id="${theme.listName}" th:value="${theme.listName}" type="checkbox">
                                                                <label class="custom-control-label" th:for="${theme.listName}" th:text="${theme.listName}" > </label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="form-group" style="padding-top: 40px;">
                                                    <label for="restaurants-location-detial">가게 이미지 추가</label>
                                                    <div th:if="${not #lists.isEmpty(payload.menuImages)}">
                                                        <div class="imgs_wrap">
                                                            <!--<div style="display: inline-block; width: 155px;text-align: center" th:if="${payload.menuImages}" th:each="item : ${payload.menuImages.split(',')}">
                                                                <img onerror="this.src='/images/default.png'" style="width: 150px;height: 120px; padding-top: 5px;  float: left;" th:src='${item}'>
                                                                <input th:value="${item}" name="files"  th:data="${item}" type="file" th:id="'input_imgs'+${item}" onchange="handleImgFileSelect(this)">
                                                                <br>
                                                                <button onclick="prompt('해당 이미지를 지우시겠습니까?')" style="margin-top:5px;width: 35px;font-size: 10px;height: 20px;color: black;border: aliceblue 3px;">삭제</button>
                                                            </div>-->

                                                            <th:block>
                                                                <div style="display: inline-block; width: 155px;text-align: center"  th:each="num : ${#numbers.sequence(0,imageSize)}">
                                                                    <div th:if="${imageSize == 1}">
                                                                        <img th:id="'thum'+${num}"  th:value="${num}" onerror="this.src='/images/default.png'" style="width: 150px;height: 120px; padding-top: 5px;  float: left;" th:src="${payload.menuImages}">
                                                                        <br>
                                                                        <input th:value="${num}" name="files"  th:data="${num}" type="file" th:id="'input_imgs'+${num}" onchange="handleImgFileSelect(this)">
                                                                        <button th:value="${num}"  th:id="'uploadImage'+${num}" style="margin-top:5px;width: 35px;font-size: 10px;height: 20px;color: black;border: aliceblue 3px;" >추가</button>
                                                                        <button th:onclick="'deleteImageAction(' + ${num} + '); return false;'" style="margin-top:5px;width: 35px;font-size: 10px;height: 20px;color: black;border: aliceblue 3px;">삭제</button>
                                                                    </div>
                                                                    <div th:if="${imageSize > 1}">
                                                                        <img th:id="'thum'+${num}"  th:value="${num}" onerror="this.src='/images/default.png'" style="width: 150px;height: 120px; padding-top: 5px;  float: left;" th:src="${payload.menuImages.split(',')[num]}"}>
                                                                        <br>
                                                                        <input th:value="${num}" name="files"  th:data="${num}" type="file" th:id="'input_imgs'+${num}" onchange="handleImgFileSelect(this)">
                                                                        <button th:value="${num}"  th:id="'uploadImage'+${num}" style="margin-top:5px;width: 35px;font-size: 10px;height: 20px;color: black;border: aliceblue 3px;" >추가</button>
                                                                        <button th:onclick="'deleteImageAction(' + ${num} + '); return false;'" style="margin-top:5px;width: 35px;font-size: 10px;height: 20px;color: black;border: aliceblue 3px;">삭제</button>
                                                                    </div>
                                                                </div>
                                                                <div style="display: inline-block; width: 155px;text-align: center"  th:each="num : ${#numbers.sequence(imageSize,12)}">
                                                                    <img th:id="'thum'+${num}"  th:value="${num}" onerror="this.src='/images/default.png'" style="width: 150px;height: 120px; padding-top: 5px;  float: left;" src="/images/default.png">
                                                                    <br>
                                                                    <input th:value="${num}" name="files"  th:data="${num}" type="file" th:id="'input_imgs'+${num}" onchange="handleImgFileSelect(this)">
                                                                    <button th:value="${num}"  th:id="'uploadImage'+${num}" style="margin-top:5px;width: 35px;font-size: 10px;height: 20px;color: black;border: aliceblue 3px;" >추가</button>
                                                                    <button th:onclick="'deleteImageAction(' + ${num} + '); return false;'" style="margin-top:5px;width: 35px;font-size: 10px;height: 20px;color: black;border: aliceblue 3px;">삭제</button>
                                                                </div>
                                                            </th:block>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>


                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- 기본정보 Card END -->

                            <div class="container-fluid">
                                <div class="col-md-12">
                                    <div class="card">
                                        <div class="card-header">
                                            <h3 class="card-title">히스토리</h3>
                                        </div>
                                        <div class="card-body">
                                            <textarea id="summernote" th:field="${shop.history}" ></textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- 히스토리 Card END -->

                            <div class="container-fluid">
                                <div class="col-md-12">
                                    <div class="card">
                                        <div class="card-header">
                                            <h3 class="card-title">메뉴 관리</h3>
                                        </div>
                                        <div class="card-body">
                                            <textarea class="summernote" th:field="${shop.menu}"></textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- 메뉴관리 Card END -->

                        </div>
                    </div>
                </form>
                <!-- /.container-fluid -->

            </div>

            <!-- End of Main Content -->

            <!-- Footer -->
            <footer class="sticky-footer bg-white">
                <div class="container my-auto">
                    <div class="copyright text-center my-auto">
                        <span>Copyright &copy; Your Website 2020</span>
                    </div>
                </div>
            </footer>
            <!-- End of Footer -->

        </div>
        <!-- End of Content Wrapper -->

    </div>
    <!-- End of Page Wrapper -->

    <!-- Scroll to Top Button-->
    <a class="scroll-to-top rounded" href="#page-top">
        <i class="fas fa-angle-up"></i>
    </a>

    <!-- Logout Modal-->
    <div class="modal fade" id="logoutModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
         aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Ready to Leave?</h5>
                    <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">×</span>
                    </button>
                </div>
                <div class="modal-body">Select "Logout" below if you are ready to end your current session.</div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
                    <a class="btn btn-primary" href="login.html">Logout</a>
                </div>
            </div>
        </div>
    </div>
    <!-- 맛집 주소검색 Modal팝업 -->
    <!-- 맛집 주소검색 Modal팝업 -->
    <!-- 맛집 주소검색 Modal팝업 -->
    <div class="modal fade" id="address-modal" tabindex="-1" role="dialog" aria-labelledby="address-modal-label" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="address-modal-bael">맛집 주소검색</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div id="daum-map-container"></div>
                </div>
            </div>
        </div>
    </div>ㅁ
    <!-- Bootstrap core JavaScript-->
    <script th:src="@{/vendor/jquery/jquery.min.js}"></script>
    <script th:src="@{/vendor/bootstrap/js/bootstrap.bundle.min.js}"></script>

    <!-- Core plugin JavaScript-->
    <script th:src="@{/vendor/jquery-easing/jquery.easing.min.js}"></script>

    <!-- Custom scripts for all pages-->
    <script th:src="@{/js/sb-admin-2.min.js}"></script>


    <!-- Page level custom scripts -->
    <script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/2.0.2/anime.min.js"></script>
    <script th:src="@{/js/bootstrap.bundle.min.js}"></script>
    <script th:src="@{/js/adminlte.js}"></script>
    <script th:src="@{/js/admin_commons.js}"></script>
    <script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote.min.js"></script>
    <script th:src="@{/js/manage-restaurants.js}"></script>
    <script th:src="@{/js/admin-recommand.js}"></script>
<!--    <script th:src="@{/js/demo/datatables-demo.js}"></script>-->
    <script th:src="@{/vendor/datatables/jquery.dataTables.min.js}"></script>
    <script th:src="@{/vendor/datatables/dataTables.bootstrap4.min.js}"></script>
</body>

<style>

    #preview{
        z-index: 9999;
        position:absolute;
        border:0px solid #ccc;
        background:#333;
        padding:1px;
        display:none;
        color:#fff;
    }
    .form-control{
        font-size: 9px !important;
    }
    .custom-select{
        font-size: 9px !important;
    }
    input[id^='input_imgs']{
        display: none;
    }
    table{
        table-layout: fixed;
        word-wrap:break-word;
    }
    select {
        font-size: 8pt !important;
    }
    .data_table {
        text-align: center;
        vertical-align: middle !important;
    }
</style>
<script type="text/javascript">
    var sel_files =[];
    /*function fileUploadAction(){
        console.log("upload")
        $("#input_imgs").trigger('click')
    }*/

    function handleImgFileSelect(e){
        sel_files = [];
        // var target_select = ;
        // var target = target_select;
        var target_index = $('#'+e.id).attr('value');
        // console.log(target);
        // console.log(e)
        // console.log(target.data);
        var files= $('#'+e.id)[0].files;
        var filesArr = Array.prototype.slice.call(files);
        var index = 0;
        filesArr.forEach(function(f) {
            if(!f.type.match("image.*")){
                alert("확장자는 이미지확장자만 가능");
                return
            }
            sel_files.push(f);
            // console.log();
            var reader = new FileReader();
            reader.onload = function(e){
                // var img = new Image();
                // img.src = e[0].value;
                // if(img.width < 720 || img.height > 100) {
                //     alert("이미지 가로 720px, 세로 270px로 맞춰서 올려주세요.");
                // }else{
                //     var html = "<a href=\"javascript:void(0);\" onclick=\"deleteImageAction(" + index +")\" id=\"img_id_"+index+"\"> <img style=\"width: 150px;height: 120px;padding-left: 10px;\" src=\"" + e.target.result + "\" data-file='"+f.name + "' class='selProductFile' title='click to remove'></a>";

                    $('#thum' + target_index).attr('src', e.target.result)
                    index++;
                // }
            }
            reader.readAsDataURL(f);
        })
    }
    function deleteImageAction(index){

        console.log('index' + index);
        sel_files.splice(index, 1);
        var img_id = "#thum"+index;
        $(img_id).attr('src', '/images/default.png')
        console.log(sel_files)
    }
    $(document).ready(function() {
        $('#example18').DataTable( {
            // "ajax": "/admin/recommand/main/regionInfo/1",
            "columns": [
                { 'data': "shopImage", 'render': function (data) { return '<img src="' + data + '" class="thumbnail" style="width: 80px;height:60px;" />'; } },
                { "data": "shopName" , 'render': function  ( data, type, row ) { return '<div><a href="/admin/shop/red/'+ row.shopId +'">'+ data + '</a></div><div><span> 주소 -'+ row.address +'</span></div>'; } },
                // { "data": "shopName", 'render': function  ( data, type, row ) { return '<button value="row.shopId" onclick="registerShop(' + row.shopId + ')"> 등록 </button>' }  },
            ],
            "columnDefs": [
                { "width": "50px", "targets": 0, "className": "data_table" },
                { "width": "200px", "targets": 1, "className": "data_table"  },
                // { "width": "60px", "targets": 2, "className": "data_table"  },
            ]
        } );


        $('button[id^=\'uploadImage\']').click(function (e) {

            e.preventDefault();
            // console.log(e);
            var id = e.target.value;
            // console.log('#handleImgFileSelect'+id)
            $('#input_imgs'+id).click();

        });

        // $("#button[id^='uploadImage']").on("change", handleImgFileSelect);


        var tagList = [];

        var renderTagList = function() {
            var i = 0;
            var tagsHtml = '';

            for(; i < tagList.length; i++) {
                console.log(tagList)
                tagsHtml += "<div class=\"tag-item btn-secondary btn\">" + tagList[i].value + "<a class=\"delete-tag-item\" onClick=\"deleteTag('" + tagList[i] + "\')\">×</a></div>"
            }

            $(".tag-list").html(tagsHtml);
        };

       /* var deleteTag = function(value) {
            var index = tagList.indexOf(value);

            if (index < 0) {
                return;
            }

            tagList.splice(index, 1);
            renderTagList();
        };
*/
        $("button[id^='uploa123dImage']").on("change", function(event) {
            console.log(event.currentTarget)
            var dictObject = {}
            const value = event.currentTarget.value;
            const name = event.currentTarget.innerText;
            console.log(name)
            if (tagList.indexOf(value) >= 0) {
                $('#table-filter3 option:eq(0)').prop('selected', true);
                return;
            }
            dictObject[value] = name;
            tagList.push(dictObject);
            renderTagList()
            $('#table-filter3 option:eq(0)').prop('selected', true);
        });





        $('.summernote').summernote();

        var xOffset = 10;
        var yOffset = 30;


        $(document).on("mouseover",".thumbnail",function(e){ //마우스 오버시

            $("body").append("<p id='preview'><img src='"+ $(this).attr("src") +"' width='400px' /></p>"); //보여줄 이미지를 선언
            $("#preview")
                .css("top",(e.pageY - xOffset) + "px")
                .css("left",(e.pageX + yOffset) + "px")
                .fadeIn("fast"); //미리보기 화면 설정 셋팅
        });

        $(document).on("mousemove",".thumbnail",function(e){ //마우스 이동시
            $("#preview")
                .css("top",(e.pageY - xOffset) + "px")
                .css("left",(e.pageX + yOffset) + "px");
        });

        $(document).on("mouseout",".thumbnail",function(){ //마우스 아웃시
            $("#preview").remove();
        });



        var list = document.getElementById('list');
        function clickButton(){
            var temp = document.createElement('li');
            temp.innerHTML = input.value;
            list.appendChild(temp);
        }
        $('#table-filter7').change( function(){
            var good_a = ["호선", "1호선", "2호선", "3호선", "4호선", "5호선", "6호선", "7호선", "8호선", "9호선", "수인분당선", "신분당선", "중앙선", "공항선",
                "경춘선", "경강선", "경의중앙선", "공항철도선", "의정부 경전철", "우이 신설선", "용인에버라인", "서해선", "김포골드라인"];
            var good_b = ["호선","1호선", "2호선"];
            var good_c = ["호선","1호선", "2호선", "3호선"];
            var good_d = ["호선","1호선", "2호선"];
            var good_e = ["호선","1호선"];
            var good_f = ["호선","1호선"];

            var target = document.getElementById("table-filter8");
            var val = $( ':selected', this).val();
            if(val == "수도권") var d = good_a;
            else if(val == "인천") var d = good_b;
            else if(val == "부산") var d = good_c;
            else if(val == "대구") var d = good_d;
            else if(val == "광주") var d = good_e;
            else if(val == "대전") var d = good_f;


            target.options.length = 0;

            for (x in d) {
                var opt = document.createElement("option");
                opt.value = d[x];
                opt.innerHTML = d[x];
                target.appendChild(opt);
            }
        });


        $('#table-filter8').change( function(){
            get_subway_scode( this); // 셀렉트 박스 선택이 바뀔때 "셀렉트박스 요소" 를 함수로 전달
        });

        function get_subway_scode(o){
            var val = $( '#table-filter7 option:selected').val(); // 전달받은 "셀렉트박스 요소" 에서 선택된 것 찾기
            var val1 = $('#table-filter8 option:selected').val(); // 전달받은 "셀렉트박스 요소" 에서 선택된 것 찾기

            $.ajax({
                url: "/category/region/" + 2 + "?b_name=" + encodeURI(val) + "&m_name=" + encodeURI(val1),
                contentType: "application/json",
                dataType: "json",
                type:"GET",
            }).done(function (data) {
                // console.log(data.data)
                // console.log(data)
                if(data.length > 0) {
                    $("#table-filter9").find("option").remove().end();
                    $("#table-filter9").append("<option>역</option>");
                    $.each(data, function(key, value) {
                        $("#table-filter9").append("<option value='" + value.regionId + "'>" + value.subwayName + "</option>");
                    });
                    console.log(data[0])
                } else {
                    $("#table-filter9").find("option").remove().end().append("<option value='0'>NO DATA</option>");
                    $("#table-filter9").find("option").remove().end();
                    $("#table-filter9").append("<option value='0'>NO DATA</option>");
                    return;
                }


                // var ul = document.createElement('ul');
                // ul.setAttribute('class','item-list-wrapper');
                // document.getElementById(className).appendChild(ul);
                // fragment.forEach(renderProductList);
                // // class="active"
                // function renderProductList(element, index, arr) {
                //     var li = document.createElement('li');
                //
                //     ul.appendChild(li);
                //
                //     if(type=='2'){
                //         if(element.subwayName != null){
                //             li.innerHTML=li.innerHTML +"<a href='/shop/region/subway/" + element.regionId +"/red'>" +element.subwayName + "("+element.districtCnt + ")" + "</a>";
                //         }
                //     }else{
                //         li.innerHTML=li.innerHTML +"<a href='/shop/region/" + element.regionId +"/red'>" +element.districtName + "("+element.districtCnt+")" + "</a>";
                //     }
                // }
            });

        }
        $('#table-filter4').change( function(){
            get_region_mcode( this); // 셀렉트 박스 선택이 바뀔때 "셀렉트박스 요소" 를 함수로 전달
        });



        function get_region_mcode(o){
            var val = $( ':selected', o).val(); // 전달받은 "셀렉트박스 요소" 에서 선택된 것 찾기
            $.ajax({
                url: "/category/region/" + 1 + "?name=" + encodeURI(val),
                contentType: "application/json",
                dataType: "json",
                type:"GET",
            }).done(function (data) {

                if(data.length > 0) {
                    $("#table-filter5").find("option").remove().end();
                    $("#table-filter5").append("<option>중분류</option>");
                    $.each(data, function(key, value) {
                        $("#table-filter5").append("<option value='" + value.regionId + "'>" + value.districtName + "</option>");
                    });
                    console.log(data[0])
                } else {
                    $("#table-filter5").find("option").remove().end().append("<option value='0'>NO DATA</option>");
                    $("#table-filter5").find("option").remove().end();
                    $("#table-filter5").append("<option value='0'>NO DATA</option>");
                    return;
                }


                // var ul = document.createElement('ul');
                // ul.setAttribute('class','item-list-wrapper');
                // document.getElementById(className).appendChild(ul);
                // fragment.forEach(renderProductList);
                // // class="active"
                // function renderProductList(element, index, arr) {
                //     var li = document.createElement('li');
                //
                //     ul.appendChild(li);
                //
                //     if(type=='2'){
                //         if(element.subwayName != null){
                //             li.innerHTML=li.innerHTML +"<a href='/shop/region/subway/" + element.regionId +"/red'>" +element.subwayName + "("+element.districtCnt + ")" + "</a>";
                //         }
                //     }else{
                //         li.innerHTML=li.innerHTML +"<a href='/shop/region/" + element.regionId +"/red'>" +element.districtName + "("+element.districtCnt+")" + "</a>";
                //     }
                // }
            });

        }
        $('#table-filter5').change( function(){
            get_region_scode( this); // 셀렉트 박스 선택이 바뀔때 "셀렉트박스 요소" 를 함수로 전달
        });

        function get_region_scode(o){
            var val = $( ':selected', o).val(); // 전달받은 "셀렉트박스 요소" 에서 선택된 것 찾기
            $.ajax({
                url: "/category/region/" + 2 + "?name=" + encodeURI(val),
                contentType: "application/json",
                dataType: "json",
                type:"GET",
            }).done(function (fragment) {

                if(data.length > 0) {
                    $("#table-filter8").find("option").remove().end();
                    $("#table-filter8").append("<option>중분류</option>");
                    $.each(data, function(key, value) {
                        $("#table-filter8").append("<option value='" + value.regionId + "'>" + value.subwayName + "</option>");
                    });
                    console.log(data[0])
                } else {
                    $("#table-filter8").find("option").remove().end().append("<option value='0'>NO DATA</option>");
                    $("#table-filter8").find("option").remove().end();
                    $("#table-filter8").append("<option value='0'>NO DATA</option>");
                    return;
                }


                // var ul = document.createElement('ul');
                // ul.setAttribute('class','item-list-wrapper');
                // document.getElementById(className).appendChild(ul);
                // fragment.forEach(renderProductList);
                // // class="active"
                // function renderProductList(element, index, arr) {
                //     var li = document.createElement('li');
                //
                //     ul.appendChild(li);
                //
                //     if(type=='2'){
                //         if(element.subwayName != null){
                //             li.innerHTML=li.innerHTML +"<a href='/shop/region/subway/" + element.regionId +"/red'>" +element.subwayName + "("+element.districtCnt + ")" + "</a>";
                //         }
                //     }else{
                //         li.innerHTML=li.innerHTML +"<a href='/shop/region/" + element.regionId +"/red'>" +element.districtName + "("+element.districtCnt+")" + "</a>";
                //     }
                // }
            });

        }
        $('#table-filter1').change( function(){
            console.log('click');
            get_mcode( this ); // 셀렉트 박스 선택이 바뀔때 "셀렉트박스 요소" 를 함수로 전달
        });

        function get_mcode(o){
            var val = $( ':selected', o).val(); // 전달받은 "셀렉트박스 요소" 에서 선택된 것 찾기
            console.log(val)
            if(val != ''){
                $.ajax({
                    type:"get",
                    url:"/admin/category/mfood/" + val,
                    datatype: "json",
                    success: function(data) {

                        if(data.length > 0) {
                            $("#table-filter2").find("option").remove().end();
                            $("#table-filter2").append("<option>중분류</option>");
                            $.each(data, function(key, value) {
                                $("#table-filter2").append("<option value='" + value.id + "'>" + value.listName + "</option>");
                            });
                            console.log(data[0])
                        } else {
                            $("#table-filter2").find("option").remove().end().append("<option value='0'>NO DATA</option>");
                            $("#table-filter3").find("option").remove().end();
                            $("#table-filter3").append("<option value='0'>NO DATA</option>");
                            return;
                        }
                    },

                    error: function(x, o, e) {
                        var msg = "페이지 호출 중 에러 발생 \n" + x.status + " : " + o + " : " + e;
                        alert(msg);
                    }
                });
            }else {
                $("#table-filter2").find("option").remove().end();
                $("#table-filter2").append("<option value='0'>중분류</option>");
                $("#table-filter3").find("option").remove().end();
                $("#table-filter3").append("<option value='0'>소분류</option>");
            }
        }

        $('#table-filter2').change( function(){
            get_scode( this ); // 셀렉트 박스 선택이 바뀔때 "셀렉트박스 요소" 를 함수로 전달
        });

        function get_scode(o){
            var val = $( ':selected', o).val(); // 전달받은 "셀렉트박스 요소" 에서 선택된 것 찾기
            console.log(val)
            if(val != '') {
                $.ajax({
                    type: "get",
                    url: "/admin/category/sfood/" + val,
                    datatype: "json",
                    success: function (data) {
                        if (data.length > 0) {
                            $("#table-filter3").find("option").remove().end();
                            $("#table-filter3").append("<option>소분류</option>");
                            $.each(data, function (key, value) {
                                $("#table-filter3").append("<option value='" + value.scode + "'>" + value.categoryName + "</option>");
                            });
                        } else {
                            $("#table-filter3").find("option").remove().end().append("<option value='0'>NO DATA</option>");
                            return;
                        }
                    },

                    error: function (x, o, e) {
                        var msg = "페이지 호출 중 에러 발생 \n" + x.status + " : " + o + " : " + e;
                        alert(msg);
                    }
                });
            }else{
                $("#table-filter3").find("option").remove().end();
                $("#table-filter3").append("<option value='0'>소분류 </option>");
            }
        }
    } );


</script>

</html>